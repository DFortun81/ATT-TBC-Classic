profession(ENCHANTING, {
	tier(CLASSIC_TIER, {
		{
			["name"] = "Rods",
			["categoryID"] = 697,
			["groups"] = {
				{
					["name"] = "Runed Arcanite Rod",
					["recipeID"] = 20051
				},
				{
					["name"] = "Runed Copper Rod",
					["recipeID"] = 7421
				},
				{
					["name"] = "Runed Golden Rod",
					["recipeID"] = 13628
				},
				{
					["name"] = "Runed Silver Rod",
					["recipeID"] = 7795
				},
				{
					["name"] = "Runed Truesilver Rod",
					["recipeID"] = 13702
				},
			}
		},
		{
			["name"] = "Reagents",
			["categoryID"] = 701,
			["groups"] = {
				{
					["name"] = "Enchanted Leather",
					["recipeID"] = 17181
				},
				{
					["name"] = "Enchanted Thorium Bar",
					["timeline"] = { "removed 3.3.0.10000" },
					["recipeID"] = 17180
				}
			}
		},
		{
			["name"] = "Boot Enchantments",
			["categoryID"] = 690,
			["groups"] = {
				{
					["name"] = "Agility",
					["recipeID"] = 13935
				},
				{
					["name"] = "Greater Agility",
					["recipeID"] = 20023
				},
				{
					["name"] = "Greater Stamina",
					["recipeID"] = 20020
				},
				{
					["name"] = "Lesser Agility",
					["recipeID"] = 13637
				},
				{
					["name"] = "Lesser Stamina",
					["recipeID"] = 13644
				},
				{
					["name"] = "Lesser Spirit",
					["recipeID"] = 13687
				},
				{
					["name"] = "Minor Agility",
					["recipeID"] = 7867
				},
				{
					["name"] = "Minor Speed",
					["recipeID"] = 13890
				},
				{
					["name"] = "Minor Stamina",
					["recipeID"] = 7863
				},
				{
					["name"] = "Stamina",
					["recipeID"] = 13836
				},
				{
					["name"] = "Spirit",
					["recipeID"] = 20024
				}
			}
		},
		{
			["name"] = "Bracer Enchantments",
			["categoryID"] = 691,
			["groups"] = {
				{
					["name"] = "Dodge",
					["recipeID"] = 13931
				},
				{
					["name"] = "Greater Intellect",
					["recipeID"] = 20008
				},
				{
					["name"] = "Greater Stamina",
					["recipeID"] = 13945
				},
				{
					["name"] = "Greater Strength",
					["recipeID"] = 13939
				},
				{
					["name"] = "Greater Spirit",
					["recipeID"] = 13846
				},
				applyclassicphase(PHASE_THREE, {
					["name"] = "Healing",
					["recipeID"] = 23802,
				}),
				{
					["name"] = "Intellect",
					["recipeID"] = 13822
				},
				{
					["name"] = "Lesser Dodge",
					["recipeID"] = 13646
				},
				{
					["name"] = "Lesser Intellect",
					["recipeID"] = 13622
				},
				{
					["name"] = "Lesser Stamina",
					["recipeID"] = 13501
				},
				{
					["name"] = "Lesser Strength",
					["recipeID"] = 13536
				},
				{
					["name"] = "Lesser Spirit",
					["recipeID"] = 7859
				},
				applyclassicphase(PHASE_THREE, {
					["name"] = "Mana Regeneration",
					["recipeID"] = 23801,
				}),
				{
					["name"] = "Minor Agility",
					["recipeID"] = 7779
				},
				{
					["name"] = "Minor Dodge",
					["recipeID"] = 7428
				},
				{
					["name"] = "Minor Health",
					["recipeID"] = 7418
				},
				{
					["name"] = "Minor Stamina",
					["recipeID"] = 7457
				},
				{
					["name"] = "Minor Strength",
					["recipeID"] = 7782
				},
				{
					["name"] = "Minor Spirit",
					["recipeID"] = 7766
				},
				{
					["name"] = "Stamina",
					["recipeID"] = 13648
				},
				{
					["name"] = "Strength",
					["recipeID"] = 13661
				},
				{
					["name"] = "Superior Stamina",
					["recipeID"] = 20011
				},
				{
					["name"] = "Superior Strength",
					["recipeID"] = 20010
				},
				{
					["name"] = "Superior Spirit",
					["recipeID"] = 20009
				},
				{
					["name"] = "Spirit",
					["recipeID"] = 13642
				}
			}
		},
		{
			["name"] = "Chest Enchantments",
			["categoryID"] = 692,
			["groups"] = {
				{
					["name"] = "Greater Health",
					["recipeID"] = 13640
				},
				{
					["name"] = "Greater Mana",
					["recipeID"] = 13663
				},
				{
					["name"] = "Greater Stats",
					["recipeID"] = 20025
				},
				{
					["name"] = "Health",
					["recipeID"] = 7857
				},
				{
					["name"] = "Lesser Absorption",
					["recipeID"] = 13538
				},
				{
					["name"] = "Lesser Health",
					["recipeID"] = 7748
				},
				{
					["name"] = "Lesser Mana",
					["recipeID"] = 7776
				},
				{
					["name"] = "Lesser Stats",
					["recipeID"] = 13700
				},
				{
					["name"] = "Major Health",
					["recipeID"] = 20026
				},
				{
					["name"] = "Major Mana",
					["recipeID"] = 20028
				},
				{
					["name"] = "Mana",
					["recipeID"] = 13607
				},
				{
					["name"] = "Minor Absorption",
					["recipeID"] = 7426
				},
				{
					["name"] = "Minor Health",
					["recipeID"] = 7420
				},
				{
					["name"] = "Minor Mana",
					["recipeID"] = 7443
				},
				{
					["name"] = "Minor Stats",
					["recipeID"] = 13626
				},
				{
					["name"] = "Stats",
					["recipeID"] = 13941
				},
				{
					["name"] = "Superior Health",
					["recipeID"] = 13858
				},
				{
					["name"] = "Superior Mana",
					["recipeID"] = 13917
				}
			}
		},
		{
			["name"] = "Cloak Enchantments",
			["categoryID"] = 693,
			["groups"] = {
				{
					["name"] = "Defense",
					["recipeID"] = 13635
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Dodge",
					["recipeID"] = 25086,
				}),
				{
					["name"] = "Fire Resistance",
					["recipeID"] = 13657
				},
				{
					["name"] = "Greater Defense",
					["recipeID"] = 13746
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Greater Fire Resistance",
					["recipeID"] = 25081,
				}),
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Greater Nature Resistance",
					["recipeID"] = 25082,
				}),
				{
					["name"] = "Greater Resistance",
					["recipeID"] = 20014
				},
				{
					["name"] = "Lesser Agility",
					["recipeID"] = 13882
				},
				{
					["name"] = "Lesser Protection",
					["recipeID"] = 13421
				},
				{
					["name"] = "Lesser Fire Resistance",
					["recipeID"] = 7861
				},
				{
					["name"] = "Lesser Shadow Resistance",
					["recipeID"] = 13522
				},
				{
					["name"] = "Minor Agility",
					["recipeID"] = 13419
				},
				{
					["name"] = "Minor Protection",
					["recipeID"] = 7771
				},
				{
					["name"] = "Minor Resistance",
					["recipeID"] = 7454
				},
				{
					["name"] = "Resistance",
					["recipeID"] = 13794
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Stealth",
					["recipeID"] = 25083,
				}),
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Subtlety",
					["recipeID"] = 25084,
				}),
				{
					["name"] = "Superior Defense",
					["recipeID"] = 20015
				}
			}
		},
		{
			["name"] = "Glove Enchantments",
			["categoryID"] = 694,
			["groups"] = {
				{
					["name"] = "Advanced Herbalism",
					["recipeID"] = 13868
				},
				{
					["name"] = "Advanced Mining",
					["recipeID"] = 13841
				},
				{
					["name"] = "Agility",
					["recipeID"] = 13815
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Fire Power",
					["recipeID"] = 25078,
				}),
				{
					["name"] = "Fishing",
					["recipeID"] = 13620
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Frost Power",
					["recipeID"] = 25074,
				}),
				{
					["name"] = "Greater Agility",
					["recipeID"] = 20012
				},
				{
					["name"] = "Greater Strength",
					["recipeID"] = 20013
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Healing Power",
					["recipeID"] = 25079,
				}),
				{
					["name"] = "Herbalism",
					["recipeID"] = 13617
				},
				{
					["name"] = "Mining",
					["recipeID"] = 13612
				},
				{
					["name"] = "Minor Haste",
					["recipeID"] = 13948
				},
				{
					["name"] = "Riding Skill",
					["recipeID"] = 13947
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Shadow Power",
					["recipeID"] = 25073,
				}),
				{
					["name"] = "Skinning",
					["recipeID"] = 13698
				},
				{
					["name"] = "Strength",
					["recipeID"] = 13887
				},
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Superior Agility",
					["recipeID"] = 25080,
				}),
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Threat",
					["recipeID"] = 25072,
				}),
			}
		},
		{
			["name"] = "Weapon Enchantments",
			["categoryID"] = 695,
			["groups"] = {
				applyclassicphase(PHASE_THREE, {
					["name"] = "Agility",
					["recipeID"] = 23800,
				}),
				applyclassicphase(PHASE_FIVE, {
					["name"] = "Agility", -- Enchant 2H Weapon
					["recipeID"] = 27837,
				}),
				{
					["name"] = "Crusader",
					["recipeID"] = 20034
				},
				{
					["name"] = "Demonslaying",
					["recipeID"] = 13915
				},
				{
					["name"] = "Fiery Weapon",
					["recipeID"] = 13898
				},
				{
					["name"] = "Greater Impact",
					["recipeID"] = 13937
				},
				{
					["name"] = "Greater Striking",
					["recipeID"] = 13943
				},
				{
					["name"] = "Healing Power",
					["recipeID"] = 22750
				},
				{
					["name"] = "Icy Chill",
					["recipeID"] = 20029
				},
				{
					["name"] = "Impact",
					["recipeID"] = 13695
				},
				{
					["name"] = "Lesser Beastslayer",
					["recipeID"] = 13653
				},
				{
					["name"] = "Lesser Elemental Slayer",
					["recipeID"] = 13655
				},
				{
					["name"] = "Lesser Impact",
					["recipeID"] = 13529
				},
				{
					["name"] = "Lesser Intellect",
					["recipeID"] = 7793
				},
				{
					["name"] = "Lesser Striking",
					["recipeID"] = 13503
				},
				{
					["name"] = "Lesser Spirit",
					["recipeID"] = 13380
				},
				{
					["name"] = "Lifestealing",
					["recipeID"] = 20032,
					["timeline"] = { "removed 4.0.3" },
				},
				{
					["name"] = "Major Intellect",
					["recipeID"] = 20036
				},
				{
					["name"] = "Major Spirit",
					["recipeID"] = 20035
				},
				applyclassicphase(PHASE_THREE, {
					["name"] = "Mighty Intellect",
					["recipeID"] = 23804,
				}),
				applyclassicphase(PHASE_THREE, {
					["name"] = "Mighty Spirit",
					["recipeID"] = 23803,
				}),
				{
					["name"] = "Minor Beastslayer",
					["recipeID"] = 7786
				},
				{
					["name"] = "Minor Impact",
					["recipeID"] = 7745
				},
				{
					["name"] = "Minor Striking",
					["recipeID"] = 7788
				},
				{
					["name"] = "Spellpower",
					["recipeID"] = 22749
				},
				applyclassicphase(PHASE_THREE, {
					["name"] = "Strength",
					["recipeID"] = 23799,
				}),
				{
					["name"] = "Striking",
					["recipeID"] = 13693
				},
				{
					["name"] = "Superior Impact",
					["recipeID"] = 20030
				},
				{
					["name"] = "Superior Striking",
					["recipeID"] = 20031
				},
				{
					["name"] = "Unholy Weapon",
					["recipeID"] = 20033
				},
				{
					["name"] = "Winter's Might",
					["recipeID"] = 21931
				}
			}
		},
		{
			["name"] = "Shield Enchantments",
			["categoryID"] = 696,
			["groups"] = {
				{
					["name"] = "Frost Resistance",
					["recipeID"] = 13933
				},
				{
					["name"] = "Greater Stamina",
					["recipeID"] = 20017
				},
				{
					["name"] = "Greater Spirit",
					["recipeID"] = 13905
				},
				{
					["name"] = "Lesser Block",
					["recipeID"] = 13689
				},
				{
					["name"] = "Lesser Protection",
					["recipeID"] = 13464
				},
				{
					["name"] = "Lesser Stamina",
					["recipeID"] = 13631
				},
				{
					["name"] = "Lesser Spirit",
					["recipeID"] = 13485
				},
				{
					["name"] = "Minor Stamina",
					["recipeID"] = 13378
				},
				{
					["name"] = "Stamina",
					["recipeID"] = 13817
				},
				{
					["name"] = "Spirit",
					["recipeID"] = 13659
				},
				{
					["name"] = "Superior Spirit",
					["recipeID"] = 20016
				}
			}
		},
		{
			["name"] = "Wands",
			["categoryID"] = 698,
			["groups"] = {
				{
					["name"] = "Greater Magic Wand",
					["recipeID"] = 14807
				},
				{
					["name"] = "Greater Mystic Wand",
					["recipeID"] = 14810
				},
				{
					["name"] = "Lesser Magic Wand",
					["recipeID"] = 14293
				},
				{
					["name"] = "Lesser Mystic Wand",
					["recipeID"] = 14809
				}
			}
		},
		applyclassicphase(PHASE_FIVE, {
			["name"] = "Oils",
			["categoryID"] = 699,
			["groups"] = {
				{
					["name"] = "Brilliant Mana Oil",
					["recipeID"] = 25130,
				},
				{
					["name"] = "Brilliant Wizard Oil",
					["recipeID"] = 25129,
				},
				{
					["name"] = "Lesser Mana Oil",
					["recipeID"] = 25127,
				},
				{
					["name"] = "Lesser Wizard Oil",
					["recipeID"] = 25126,
				},
				{
					["name"] = "Minor Mana Oil",
					["recipeID"] = 25125,
				},
				{
					["name"] = "Minor Wizard Oil",
					["recipeID"] = 25124,
				},
				{
					["name"] = "Wizard Oil",
					["recipeID"] = 25128,
				}
			}
		}),
		{
			["name"] = "Trinket",
			["categoryID"] = 700,
			["groups"] = {
				{
					["name"] = "Smoking Heart of the Mountain",
					["recipeID"] = 15596
				}
			}
		}
	}),
	applyclassicphase(TBC_PHASE_ONE, tier(TBC_TIER, {
		applyclassicphase(LEGION_PHASE_ONE, {
			["name"] = "Illusions",
			["categoryID"] = 705,
			["groups"] = {
				{
					["name"] = "Tome of Illusions: Outland",
					["recipeID"] = 217641
				}
			}
		}),
		{
			["name"] = "Rods",
			["categoryID"] = 697,
			["groups"] = {
				{
					["name"] = "Runed Adamantite Rod",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 32665
				},
				{
					["name"] = "Runed Eternium Rod",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 32667
				},
				{
					["name"] = "Runed Fel Iron Rod",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 32664
				},
			}
		},
		{
			["name"] = "Reagents",
			["categoryID"] = 680,
			["groups"] = {
				{
					["name"] = "Large Prismatic Shard",
					["recipeID"] = 28022
				},
				{
					["name"] = "Nexus Transformation",
					["recipeID"] = 42613
				},
				{
					["name"] = "Small Prismatic Shard",
					["recipeID"] = 42615
				},
				applyclassicphase(TBC_PHASE_FIVE, {
					["name"] = "Void Shatter",
					["recipeID"] = 45765
				}),
			},
		},
		{
			["name"] = "Ring Enchantments",
			["categoryID"] = 445,
			["groups"] = {
				{
					["name"] = "Healing Power",
					["timeline"] = { "removed 6.0.2.10000" },
					["recipeID"] = 27926,
				},
				{
					["name"] = "Spellpower",
					["timeline"] = { "removed 6.0.2.10000" },
					["recipeID"] = 27924,
				},
				applyclassicphase(TBC_PHASE_THREE, {
					["name"] = "Stats",
					["timeline"] = { "removed 6.0.2.10000" },
					["recipeID"] = 27927,
				}),
				{
					["name"] = "Striking",
					["timeline"] = { "removed 6.0.2.10000" },
					["recipeID"] = 27920,
				},
			},
		},
		{
			["name"] = "Boot Enchantments",
			["categoryID"] = 681,
			["groups"] = {
				{
					["name"] = "Boar's Speed",
					["recipeID"] = 34008
				},
				{
					["name"] = "Cat's Swiftness",
					["recipeID"] = 34007
				},
				{
					["name"] = "Dexterity",
					["recipeID"] = 27951
				},
				{
					["name"] = "Fortitude",
					["recipeID"] = 27950
				},
				{
					["name"] = "Surefooted",
					["recipeID"] = 27954
				},
				{
					["name"] = "Vitality",
					["recipeID"] = 27948
				}
			}
		},
		{
			["name"] = "Bracer Enchantments",
			["categoryID"] = 682,
			["groups"] = {
				{
					["name"] = "Brawn",
					["recipeID"] = 27899
				},
				{
					["name"] = "Fortitude",
					["recipeID"] = 27914
				},
				{
					["name"] = "Greater Dodge",
					["recipeID"] = 27906
				},
				{
					["name"] = "Lesser Assault",
					["recipeID"] = 34002
				},
				{
					["name"] = "Major Intellect",
					["recipeID"] = 34001
				},
				{
					["name"] = "Spellpower",
					["recipeID"] = 27917
				},
				{
					["name"] = "Stats",
					["recipeID"] = 27905
				},
				{
					["name"] = "Superior Healing",
					["recipeID"] = 27911
				},
				{
					["name"] = "Versatility Prime",
					["recipeID"] = 27913
				}
			}
		},
		{
			["name"] = "Chest Enchantments",
			["categoryID"] = 683,
			["groups"] = {
				applyclassicphase(TBC_PHASE_FIVE, {
					["name"] = "Dodge",
					["recipeID"] = 46594
				}),
				{
					["name"] = "Exceptional Health",
					["recipeID"] = 27957
				},
				{
					["name"] = "Exceptional Stats",
					["recipeID"] = 27960
				},
				{
					["name"] = "Major Armor",
					["recipeID"] = 33992
				},
				{
					["name"] = "Major Versatility",
					["recipeID"] = 33990
				},
				{
					["name"] = "Versatility Prime",
					["recipeID"] = 33991
				}
			}
		},
		{
			["name"] = "Cloak Enchantments",
			["categoryID"] = 684,
			["groups"] = {
				{
					["name"] = "Greater Agility",
					["recipeID"] = 34004
				},
				{
					["name"] = "Greater Arcane Resistance",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 34005,
				},
				-- #if AFTER WRATH
				applyclassicphase(TBC_PHASE_FIVE, {
					["name"] = "Greater Dodge",
					["recipeID"] = 47051
				}),
				-- #endif
				{
					["name"] = "Greater Shadow Resistance",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 34006,
				},
				{
					["name"] = "Major Armor",
					["recipeID"] = 27961
				},
				{
					["name"] = "Major Resistance",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 27962,
				},
				{
					["name"] = "PvP Power",
					["recipeID"] = 34003
				},
				-- #if BEFORE WRATH
				applyclassicphase(TBC_PHASE_FIVE, {
					["name"] = "Steelweave",
					["recipeID"] = 47051
				}),
				-- #endif
			}
		},
		{
			["name"] = "Glove Enchantments",
			["categoryID"] = 685,
			["groups"] = {
				{
					["name"] = "Assault",
					["recipeID"] = 33996
				},
				{
					["name"] = "Blasting",
					["recipeID"] = 33993
				},
				{
					["name"] = "Major Healing",
					["recipeID"] = 33999
				},
				{
					["name"] = "Major Spellpower",
					["recipeID"] = 33997
				},
				{
					["name"] = "Major Strength",
					["recipeID"] = 33995
				},
				{
					["name"] = "Precise Strikes",
					["recipeID"] = 33994
				},
			}
		},
		{
			["name"] = "Weapon Enchantments",
			["categoryID"] = 686,
			["groups"] = {
				{
					["name"] = "Battlemaster",
					["recipeID"] = 28004
				},
				applyclassicphase(TBC_PHASE_THREE, {
					["name"] = "Deathfrost",
					["recipeID"] = 46578
				}),
				applyclassicphase(TBC_PHASE_FOUR, {
					["name"] = "Executioner",
					["recipeID"] = 42974
				}),
				applyclassicphase(TBC_PHASE_THREE, {
					["name"] = "Greater Agility",
					["recipeID"] = 42620
				}),
				{
					["name"] = "Major Agility",
					["recipeID"] = 27977
				},
				{
					["name"] = "Major Healing",
					["recipeID"] = 34010
				},
				{
					["name"] = "Major Intellect",
					["recipeID"] = 27968
				},
				{
					["name"] = "Major Spellpower",
					["recipeID"] = 27975
				},
				applyclassicphase(TBC_PHASE_THREE, {
					["name"] = "Major Striking",
					["recipeID"] = 27967
				}),
				{
					["name"] = "Mongoose",
					["recipeID"] = 27984
				},
				{
					["name"] = "Potency",
					["recipeID"] = 27972
				},
				{
					["name"] = "Savagery",
					["recipeID"] = 27971
				},
				{
					["name"] = "Soulfrost",
					["recipeID"] = 27982
				},
				{
					["name"] = "Spellsurge",
					["recipeID"] = 28003
				},
				{
					["name"] = "Sunfire",
					["recipeID"] = 27981
				}
			}
		},
		{
			["name"] = "Shield Enchantments",
			["categoryID"] = 687,
			["groups"] = {
				{
					["name"] = "Armor",
					["recipeID"] = 44383
				},
				{
					["name"] = "Intellect",
					["recipeID"] = 27945
				},
				{
					["name"] = "Lesser Dodge",
					["recipeID"] = 27944
				},
				{
					["name"] = "Major Stamina",
					["recipeID"] = 34009
				},
				{
					["name"] = "Parry",
					["recipeID"] = 27946
				},
				{
					["name"] = "Resistance",
					["timeline"] = { "removed 5.0.4.10000" },
					["recipeID"] = 27947
				},
			}
		},
		{
			["name"] = "Oils",
			["categoryID"] = 688,
			["groups"] = {
				{
					["name"] = "Superior Mana Oil",
					["recipeID"] = 28016
				},
				{
					["name"] = "Superior Wizard Oil",
					["recipeID"] = 28019
				}
			}
		},
		{
			["name"] = "Other",
			["categoryID"] = 689,
			["groups"] = {
				{
					["name"] = "Prismatic Sphere",
					["recipeID"] = 28027
				},
				{
					["name"] = "Void Sphere",
					["recipeID"] = 28028
				}
			}
		}
	})),
	applyclassicphase(WRATH_PHASE_ONE, tier(WOTLK_TIER, {
		
	})),
	applyclassicphase(CATA_PHASE_ONE, tier(CATA_TIER, {
		
	})),
	applyclassicphase(MOP_PHASE_ONE, tier(MOP_TIER, {
		
	})),
	applyclassicphase(WOD_PHASE_ONE, tier(WOD_TIER, {
		
	})),
	applyclassicphase(LEGION_PHASE_ONE, tier(LEGION_TIER, {
		
	})),
	applyclassicphase(BFA_PHASE_ONE, tier(BFA_TIER, {
		
	})),
	applyclassicphase(SHADOWLANDS_PHASE_ONE, tier(SL_TIER, {
		
	})),
});

-- Enchanting Item Database
_.ItemDB = {};

-- Recipe Cache (for Validation)
local recipeCache, recipeCacheU = {}, {};
local function cacheRecipes(g)
	if g and type(g) == "table" then
		if g.groups then cacheRecipes(g.groups); end
		if g.g then cacheRecipes(g.g); end
		local spellID = g.spellID or g.recipeID;
		if spellID then
			recipeCache[spellID] = true; 
			if g.u then recipeCacheU[spellID] = g.u; end
		end
		for i,o in ipairs(g) do
			cacheRecipes(o);
		end
	end
end
cacheRecipes(_.Professions);

-- Item Recipe Database
local itemrecipe = function(name, itemID, spellID, phase, timeline)
	local o = { ["itemID"] = itemID, ["spellID"] = spellID };
	if type(phase) == "string" then
		timeline = phase;
		phase = nil;
	end
	if timeline then
		-- Ensure that the timeline is in a table format.
		if type(timeline) == "string" then timeline = { timeline }; end
		if type(timeline) == "table" then o.timeline = timeline; end
	end
	if name then
		-- Ensure that the name is in a string format.
		if type(name) == "table" then
			-- #if AFTER CATA
			name = name[2];
			-- #else
			name = name[1];
			-- #endif
		end
		o.name = name;
	end
	_.ItemDB[itemID] = phase and applyclassicphase(phase, o) or o;
	
	-- Ensure that this recipe's spellID exists in the profession database.
	if recipeCache and type(timeline) ~= "boolean" then
		if recipeCache[o.spellID] then
			-- Grab the phase from the cache.
			local u = recipeCacheU[o.spellID];
			if u then
				if o.u ~= u then
					print("ITEM RECIPE MISSING U: ", name, o.spellID, u, o.u);
					o.u = u;
				end
			elseif o.u ~= u then
				print("RECIPE MISSING U: ", name, o.spellID, o.u);
			end
		else
			print("MISSING RECIPE", name, o.spellID);
		end
	end
	return o;
end

-- Classic Recipes
itemrecipe("Formula: Enchant Chest - Minor Mana", 6342, 7443);
itemrecipe("Formula: Enchant Bracer - Minor Spirit", 6344, 7766);
itemrecipe("Formula: Enchant Chest - Lesser Mana", 6346, 7776);
itemrecipe("Formula: Enchant Bracer - Minor Strength", 6347, 7782);
itemrecipe("Formula: Enchant Weapon - Minor Beastslayer", 6348, 7786);
itemrecipe("Formula: Enchant 2H Weapon - Lesser Intellect", 6349, 7793);
itemrecipe("Formula: Enchant Bracer - Lesser Spirit", 6375, 7859);
itemrecipe("Formula: Enchant Boots - Minor Agility", 6377, 7867);
itemrecipe("Formula: Enchant 2H Weapon - Lesser Spirit", 11038, 13380);
itemrecipe("Formula: Enchant Cloak - Minor Agility", 11039, 13419);
itemrecipe("Formula: Enchant Shield - Lesser Protection", 11081, 13464);
itemrecipe("Formula: Enchant Cloak - Lesser Shadow Resistance", 11098, 13522);
itemrecipe("Formula: Enchant Bracer - Lesser Strength", 11101, 13536);
itemrecipe("Formula: Enchant Gloves - Mining", 11150, 13612);
itemrecipe("Formula: Enchant Gloves - Herbalism", 11151, 13617);
itemrecipe("Formula: Enchant Gloves - Fishing", 11152, 13620);
itemrecipe("Formula: Enchant Bracer - Lesser Deflection", 11163, 13646);
itemrecipe("Formula: Enchant Weapon - Lesser Beastslayer", 11164, 13653);
itemrecipe("Formula: Enchant Weapon - Lesser Elemental Slayer", 11165, 13655);
itemrecipe("Formula: Enchant Gloves - Skinning", 11166, 13698);
itemrecipe("Formula: Enchant Boots - Lesser Spirit", 11167, 13687);
itemrecipe("Formula: Enchant Shield - Lesser Block", 11168, 13689);
itemrecipe("Formula: Enchant Shield - Stamina", 11202, 13817);
itemrecipe("Formula: Enchant Gloves - Advanced Mining", 11203, 13841);
itemrecipe("Formula: Enchant Bracer - Greater Spirit", 11204, 13846);
itemrecipe("Formula: Enchant Gloves - Advanced Herbalism", 11205, 13868);
itemrecipe("Formula: Enchant Cloak - Lesser Agility", 11206, 13882);
itemrecipe("Formula: Enchant Weapon - Fiery Weapon", 11207, 13898);
itemrecipe("Formula: Enchant Weapon - Demonslaying", 11208, 13915);
itemrecipe("Formula: Enchant Bracer - Deflection", 11223, 13931);
itemrecipe("Formula: Enchant Shield - Frost Resistance", 11224, 13933);
itemrecipe("Formula: Enchant Bracer - Greater Stamina", 11225, 13945);
itemrecipe("Formula: Enchant Gloves - Riding Skill", 11226, 13947);
itemrecipe("Formula: Smoking Heart of the Mountain", 11813, 15596);
itemrecipe("Formula: Enchant Bracer - Greater Intellect", 16214, 20008);
itemrecipe("Formula: Enchant Boots - Greater Stamina", 16215, 20020);
itemrecipe("Formula: Enchant Cloak - Greater Resistance", 16216, 20014);
itemrecipe("Formula: Enchant Shield - Greater Stamina", 16217, 20017);
itemrecipe("Formula: Enchant Bracer - Superior Spirit", 16218, 20009);
itemrecipe("Formula: Enchant Gloves - Greater Agility", 16219, 20012);
itemrecipe("Formula: Enchant Boots - Spirit", 16220, 20024);
itemrecipe("Formula: Enchant Chest - Major Health", 16221, 20026);
itemrecipe("Formula: Enchant Shield - Superior Spirit", 16222, 20016);
itemrecipe("Formula: Enchant Weapon - Icy Chill", 16223, 20029);
itemrecipe("Formula: Enchant Cloak - Superior Defense", 16224, 20015);
itemrecipe("Formula: Enchant Chest - Major Mana", 16242, 20028);
itemrecipe("Formula: Runed Arcanite Rod", 16243, 20051);
itemrecipe("Formula: Enchant Gloves - Greater Strength", 16244, 20013);
itemrecipe("Formula: Enchant Boots - Greater Agility", 16245, 20023);
itemrecipe("Formula: Enchant Bracer - Superior Strength", 16246, 20010);
itemrecipe("Formula: Enchant 2H Weapon - Superior Impact", 16247, 20030);
itemrecipe("Formula: Enchant Weapon - Unholy", 16248, 20033);
itemrecipe("Formula: Enchant 2H Weapon - Major Intellect", 16249, 20036);
itemrecipe("Formula: Enchant Weapon - Superior Striking", 16250, 20031);
itemrecipe("Formula: Enchant Bracer - Superior Stamina", 16251, 20011);
itemrecipe("Formula: Enchant Weapon - Crusader", 16252, 20034);
itemrecipe("Formula: Enchant Chest - Greater Stats", 16253, 20025);
itemrecipe("Formula: Enchant Weapon - Lifestealing", 16254, 20032);
itemrecipe("Formula: Enchant 2H Weapon - Major Spirit", 16255, 20035);
itemrecipe("Formula: Enchant Weapon - Spell Power", 18259, 22749);
itemrecipe("Formula: Enchant Weapon - Healing Power", 18260, 22750);

itemrecipe("Formula: Enchant Weapon - Strength", 19444, 23799, PHASE_THREE);
itemrecipe("Formula: Enchant Weapon - Agility", 19445, 23800, PHASE_THREE);
itemrecipe("Formula: Enchant Bracer - Mana Regeneration", 19446, 23801, PHASE_THREE);
itemrecipe("Formula: Enchant Bracer - Healing", 19447, 23802, PHASE_THREE);
itemrecipe("Formula: Enchant Weapon - Mighty Spirit", 19448, 23803, PHASE_THREE);
itemrecipe("Formula: Enchant Weapon - Mighty Intellect", 19449, 23804, PHASE_THREE);

itemrecipe("Formula: Enchant Gloves - Threat", 20726, 25072, PHASE_FIVE);
itemrecipe("Formula: Enchant Gloves - Shadow Power", 20727, 25073, PHASE_FIVE);
itemrecipe("Formula: Enchant Gloves - Frost Power", 20728, 25074, PHASE_FIVE);
itemrecipe("Formula: Enchant Gloves - Fire Power", 20729, 25078, PHASE_FIVE);
itemrecipe("Formula: Enchant Gloves - Healing Power", 20730, 25079, PHASE_FIVE);
itemrecipe("Formula: Enchant Gloves - Superior Agility", 20731, 25080, PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Greater Fire Resistance", 20732, 25081, PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Greater Nature Resistance", 20733, 25082, PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Stealth", 20734, 25083, PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Subtlety", 20735, 25084, PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Dodge", 20736, 25086, PHASE_FIVE);
itemrecipe("Formula: Minor Mana Oil", 20752, 25125, PHASE_FIVE);
itemrecipe("Formula: Lesser Wizard Oil", 20753, 25126, PHASE_FIVE);
itemrecipe("Formula: Lesser Mana Oil", 20754, 25127, PHASE_FIVE);
itemrecipe("Formula: Wizard Oil", 20755, 25128, PHASE_FIVE);
itemrecipe("Formula: Brilliant Wizard Oil", 20756, 25129, PHASE_FIVE);
itemrecipe("Formula: Brilliant Mana Oil", 20757, 25130, PHASE_FIVE);
itemrecipe("Formula: Minor Wizard Oil", 20758, 25124, PHASE_FIVE);
itemrecipe("Formula: Enchant 2H Weapon - Agility", 22392, 27837, PHASE_FIVE);

un(FEAST_OF_WINTER_VEIL, itemrecipe("Formula: Enchant Weapon - Winter's Might", 17725, 21931));

-- #if AFTER TBC
-- TBC Recipes
itemrecipe("Formula: Enchant Bracer - Major Defense", 22530, 27906, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Bracer - Superior Healing", 22531, 27911, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Bracer - Restore Mana Prime", 22532, 27911, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Bracer - Fortitude", 22533, 27914, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Bracer - Spellpower", 22534, 27917, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Ring - Striking", 22535, 27920, TBC_PHASE_ONE, "removed 6.0.2.10000");
itemrecipe("Formula: Enchant Ring - Spellpower", 22536, 27924, TBC_PHASE_ONE, "removed 6.0.2.10000");
itemrecipe("Formula: Enchant Ring - Healing Power", 22537, 27926, TBC_PHASE_ONE, "removed 6.0.2.10000");
itemrecipe("Formula: Enchant Ring - Stats", 22538, 27927, TBC_PHASE_THREE, "removed 6.0.2.10000");
itemrecipe("Formula: Enchant Shield - Intellect", 22539, 27945, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Shield - Shield Block", 22540, 27946, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Shield - Resistance", 22541, 27947, TBC_PHASE_ONE, "removed 5.0.4.10000");
itemrecipe("Formula: Enchant Boots - Vitality", 22542, 27948, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Boots - Fortitude", 22543, 27950, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Boots - Dexterity", 22544, 27951, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Boots - Surefooted", 22545, 27954, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Chest - Exceptional Stats", 22547, 27960, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Cloak - Major Resistance", 22548, 27962, TBC_PHASE_ONE, "removed 5.0.4.10000");
itemrecipe("Formula: Enchant Weapon - Major Intellect", 22551, 27968, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Major Striking", 22552, 27967, TBC_PHASE_THREE);
itemrecipe("Formula: Enchant Weapon - Potency", 22553, 27972, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant 2H Weapon - Savagery", 22554, 27971, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Major Spellpower", 22555, 27975, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant 2H Weapon - Major Agility", 22556, 27977, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Battlemaster", 22557, 28004, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Spellsurge", 22558, 28003, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Mongoose", 22559, 27984, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Sunfire", 22560, 27981, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Soulfrost", 22561, 27982, TBC_PHASE_ONE);
itemrecipe("Formula: Superior Mana Oil", 22562, 28016, TBC_PHASE_ONE, "added 2.0.1.6180");
itemrecipe("Formula: Superior Wizard Oil", 22563, 28019, TBC_PHASE_ONE, "added 2.0.1.6180");
itemrecipe("Formula: Large Prismatic Shard", 22565, 28022, TBC_PHASE_ONE, "added 2.0.1.6180");
itemrecipe("Formula: Enchant Bracer - Superior Healing", 24000, 27911, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Chest - Exceptional Stats", 24003, 27960, TBC_PHASE_ONE);
itemrecipe("Formula: Runed Adamantite Rod", 25848, 32665, TBC_PHASE_ONE, "removed 5.0.4.10000");
itemrecipe("Formula: Runed Eternium Rod", 25849, 32667, TBC_PHASE_ONE, "removed 5.0.4.10000");

itemrecipe("Formula: Enchant Chest - Major Resilience", 28270, 33992, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Gloves - Spell Strike", 28271, 33994, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Gloves - Major Spellpower", 28272, 33997, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Gloves - Major Healing", 28273, 33999, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Cloak - Spell Penetration", 28274, 34003, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Cloak - Greater Arcane Resistance", 28276, 34005, TBC_PHASE_ONE, "removed 5.0.4.10000");
itemrecipe("Formula: Enchant Cloak - Greater Shadow Resistance", 28277, 34006, TBC_PHASE_ONE, "removed 5.0.4.10000");
itemrecipe("Formula: Enchant Boots - Cat's Swiftness", 28279, 34007, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Boots - Boar's Speed", 28280, 34008, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Weapon - Major Healing", 28281, 34010, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Shield - Major Stamina", 28282, 34009, TBC_PHASE_ONE);
itemrecipe("Formula: Enchant Cloak - Dodge", 33148, 25086, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Cloak - Stealth", 33149, 25083, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Cloak - Subtlety", 33150, 25084, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Cloak - Subtlety", 33151, 25084, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Gloves - Superior Agility", 33152, 25080, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Gloves - Threat", 33153, 25072, TBC_PHASE_ONE, true);
itemrecipe("Formula: Enchant Weapon - Greater Agility", 33165, 42620, TBC_PHASE_THREE);

-- Technically a holiday?
itemrecipe("Formula: Enchant Weapon - Deathfrost", 35498, 46578, TBC_PHASE_THREE);

itemrecipe("Formula: Enchant Weapon - Executioner", 33307, 42974, TBC_PHASE_FOUR);

itemrecipe("Formula: Void Shatter", 34872, 45765, TBC_PHASE_FIVE);
itemrecipe("Formula: Enchant Boots - Boar's Speed", 35297, 34008, TBC_PHASE_FIVE, true);
itemrecipe("Formula: Enchant Boots - Vitality", 35298, 27948, TBC_PHASE_FIVE, true);
itemrecipe("Formula: Enchant Boots - Cat's Swiftness", 35299, 34007, TBC_PHASE_FIVE, true);
itemrecipe("Formula: Enchant Chest - Defense", 35500, 46594, TBC_PHASE_FIVE);
itemrecipe("Formula: Enchant Cloak - Steelweave", 35756, 47051, TBC_PHASE_FIVE);
-- #endif

-- #if AFTER WRATH
-- Wrath Recipes

-- #endif

-- These items never made it in.
recipeCache = nil;	-- Invalidate the cache.
_.NeverImplemented = bubbleDown({ ["u"] = NEVER_IMPLEMENTED }, {
	filter(200, {	-- Recipe
		itemrecipe("Formula: Imbue Chest - Minor Spirit", 6222);
		itemrecipe("Formula: Imbue Chest - Spirit", 6343);
		itemrecipe("Formula: Imbue Cloak - Protection", 6345);
		itemrecipe("Formula: Enchant Boots - Minor Stamina", 6376);
		-- #if AFTER TBC
		itemrecipe("Formula: Enchant Chest - Exceptional Mana", 22546);
		itemrecipe("Formula: Arcane Dust", 22564);
		recipe(28021),	-- Arcane Dust
		-- #endif
	}),
});